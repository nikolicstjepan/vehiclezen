(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{77:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),s=a.n(c),i=(a(46),a(47),a(4)),l=a(10),o=Object(l.a)(),u=a(5),j=a(15),b=a(0);function d(e){var t=e.isGuest,a=e.onLogout;return Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(b.jsx)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:t?Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(j.a,{className:"nav-link active",to:"/login",children:"Login"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(j.a,{className:"nav-link active",to:"/register",children:"Register"})})]}):Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(j.a,{className:"nav-link active",to:"/",children:"Vehicles"})}),Object(b.jsx)("li",{className:"nav-item ms-2",children:Object(b.jsx)("button",{className:"btn btn-outline-light",onClick:a,children:"Logout"})})]})})})}var h=a(8),p=Object(h.d)({name:"user",initialState:{token:""},reducers:{setToken:function(e,t){localStorage.setItem("token",t.payload),e.token=t.payload}}}),m=p.actions.setToken,O=p.reducer,v=function(e){return e.user.token};function x(){var e=!Object(u.c)(v),t=Object(u.b)();return Object(b.jsx)(d,{isGuest:e,onLogout:function(){o.push("/login"),t(m())}})}function f(){return Object(b.jsx)("div",{children:Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"/",children:"Vehiclezen"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)(x,{})]})})})}function g(e){var t=e.children;return Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"container py-5",children:t})]})}var y=a(3),N=a.n(y),k=a(7),w=a(14),S=a(6),C=a(17);function A(e){var t,a=e.type,n=void 0===a?"text":a,r=e.name,c=e.value,s=e.onChange;return Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:r,className:"form-label",children:(t=r,t[0].toUpperCase()+t.slice(1))}),Object(b.jsx)("input",{type:n,value:c,required:!0,className:"form-control",name:r,id:r,onChange:s})]})}function I(e){var t=e.handleSubmit,a=e.actionText,r=Object(n.useState)({username:"",password:""}),c=Object(w.a)(r,2),s=c[0],i=c[1],l=function(e){var t=e.target,a=t.name,n=t.value;i(Object(C.a)(Object(C.a)({},s),{},Object(S.a)({},a,n)))};return Object(b.jsx)("div",{className:"row justify-content-center",children:Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s)},children:[Object(b.jsx)(A,{name:"username",value:s.username,onChange:l}),Object(b.jsx)(A,{name:"password",type:"password",value:s.password,onChange:l}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:a})]})})})}var L,P=a(18),T=a.n(P),D=a(41),R=a(16),F=Object(h.c)(),V=F.getInitialState({status:"idle",error:null}),E=Object(h.b)("vehicles/addVehicle",function(){var e=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("/vehicles",t);case 2:return a=e.sent,e.abrupt("return",a.posted);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(h.b)("vehicles/fetchVehicles",Object(k.a)(N.a.mark((function e(){var t,a,n,r,c,s,i,l=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=l.length>0&&void 0!==l[0]?l[0]:{},n=a.type,r=a.term,c=a.page,e.t0=n,e.next="make"===e.t0?4:"model"===e.t0?6:"year"===e.t0?8:10;break;case 4:return s=ee,e.abrupt("break",11);case 6:return s=te,e.abrupt("break",11);case 8:return s=ae,e.abrupt("break",11);case 10:s=ne;case 11:return""===r&&(s=ne),e.next=14,s((t={},Object(S.a)(t,n,r),Object(S.a)(t,"page",c),t));case 14:return i=e.sent,e.abrupt("return",i.list);case 16:case"end":return e.stop()}}),e)})))),U=Object(h.b)("vehicles/removeVehicle",function(){var e=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,re(a);case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),B=Object(h.d)({name:"vehicles",initialState:V,reducers:{removeError:function(e){e.error=null}},extraReducers:(L={},Object(S.a)(L,E.fulfilled,(function(e,t){F.addOne(e,t.payload),e.error=null})),Object(S.a)(L,U.fulfilled,(function(e,t){F.removeOne(e,t.payload),e.error=null})),Object(S.a)(L,M.pending,(function(e){e.status="loading",e.error=null})),Object(S.a)(L,M.fulfilled,(function(e,t){e.status="succeeded",F.setAll(e,t.payload),e.error=null})),Object(S.a)(L,E.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),L)}),G=B.actions.removeError,J=B.reducer,Y=F.getSelectors((function(e){return e.vehicles})),q=Y.selectAll,z=(Y.selectById,Y.selectIds,function(e){return e.vehicles.status}),W=function(e){return e.vehicles.error},H=Object(R.c)({vehicles:J,user:O});var K=Object(h.a)({reducer:H,middleware:Object(D.a)(Object(h.e)())});T.a.defaults.baseURL="http://localhost:6200/api/v1",T.a.defaults.headers.common={Accept:"application/json","Content-Type":"application/json"},T.a.defaults.validateStatus=function(e){return e<500};var Q=function(){var e=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(t,{headers:{token:localStorage.getItem("token")}});case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:403===a.status&&(K.dispatch(m()),o.push("/login"));case 8:return e.abrupt("return",Promise.reject(a.status));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(k.a)(N.a.mark((function e(t){var a,n,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,T.a.post(t,a,{headers:{token:localStorage.getItem("token")}});case 3:if(201!==(n=e.sent).status&&200!==n.status){e.next=8;break}return e.abrupt("return",n.data);case 8:403===n.status&&(K.dispatch(m()),o.push("/login"));case 9:return e.abrupt("return",Promise.reject(n.data.error));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(k.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete(t,{headers:{token:localStorage.getItem("token")}});case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:403===a.status&&(K.dispatch(),o.push("/login"));case 8:return e.abrupt("return",Promise.reject(a.status));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function $(e){return X("/users",e)}function _(e){return X("/users/login",e)}function ee(e){var t=e.make,a=e.page;return Q("/vehicles?make=".concat(t,"&page=").concat(a))}function te(e){var t=e.model,a=e.page;return Q("/vehicles?model=".concat(t,"&page=").concat(a))}function ae(e){var t=e.year,a=e.page;return Q("/vehicles?year=".concat(t,"&page=").concat(a))}function ne(e){var t=e.page;return Q("/vehicles?page=".concat(t=t||1))}function re(e){return Z("/vehicles/".concat(e))}function ce(){var e=Object(u.b)(),t=Object(n.useState)(),a=Object(w.a)(t,2),r=a[0],c=a[1],s=function(){var t=Object(k.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(a);case 3:n=t.sent,console.log({response:n}),e(m(n.token)),o.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c("Wrong combination of username and password");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"text-center",children:"Login"}),Object(b.jsxs)("div",{className:"py-5",children:[r&&Object(b.jsx)("div",{className:"alert alert-danger m-3 position-fixed bottom-0 end-0",role:"alert",children:r}),Object(b.jsx)(I,{handleSubmit:s,actionText:"Login"})]})]})}function se(){var e=Object(n.useState)(),t=Object(w.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t);case 3:o.push("/login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"text-center",children:"Register"}),Object(b.jsxs)("div",{className:"py-5",children:[a&&Object(b.jsx)("div",{className:"alert alert-danger m-3 position-fixed bottom-0 end-0",role:"alert",children:a}),Object(b.jsx)(I,{handleSubmit:c,actionText:"Register"})]})]})}function ie(e){var t=e.handleRemove,a=Object(n.useState)("Delete"),r=Object(w.a)(a,2),c=r[0],s=r[1];return Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){if("Delete"===c)return s("Are you sure?");t()},children:c})}function le(e){var t=Object(u.b)(),a=e.id,n=e.make,r=e.model,c=e.year;return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:n}),Object(b.jsx)("td",{children:r}),Object(b.jsx)("td",{children:c}),Object(b.jsx)("td",{children:Object(b.jsx)(ie,{handleRemove:function(){return t(U({id:a}))}})})]},a)}function oe(e){var t=e.vehicles,a=e.loading;return 0===t.length?Object(b.jsx)("div",{className:"text-center fw-bold",children:"No vehicles"}):Object(b.jsx)("div",{class:"table-responsive",children:Object(b.jsxs)("table",{className:"table table-striped table-bordered table-sm",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{style:{width:"200px"},scope:"col",children:"Make"}),Object(b.jsx)("th",{style:{width:"350px"},scope:"col",children:"Model"}),Object(b.jsx)("th",{scope:"col",children:"Year"}),Object(b.jsx)("th",{style:{width:"100px"},scope:"col",children:"Action"})]})}),Object(b.jsx)("tbody",{children:a?Object(b.jsx)(ue,{}):t.map((function(e){return Object(b.jsx)(le,Object(C.a)({},e),e.id)}))})]})})}function ue(){return new Array(10).fill(!0).map((function(e,t){return Object(b.jsxs)("tr",{style:{height:"47px"},children:[Object(b.jsx)("td",{}),Object(b.jsx)("td",{}),Object(b.jsx)("td",{}),Object(b.jsx)("td",{})]},t)}))}function je(e){var t=e.filter,a=e.handleFilterChange,n=t.type,r=t.term;return Object(b.jsxs)("div",{className:"row justify-content-between mb-3",children:[Object(b.jsx)("div",{className:"col-auto",children:Object(b.jsx)(j.a,{className:"btn btn-primary mx-auto",to:"/new",children:"Add new"})}),Object(b.jsx)("div",{className:"col-auto",children:Object(b.jsxs)("div",{className:"row justify-content-end g-2",children:[Object(b.jsx)("div",{className:"col-auto",children:Object(b.jsx)("input",{type:"text",name:"term",value:r,placeholder:"Search...",onChange:a,className:"form-control"})}),Object(b.jsx)("div",{className:"col-auto",children:Object(b.jsxs)("select",{className:"form-select",onChange:a,name:"type",value:n,children:[Object(b.jsx)("option",{value:"make",children:"Make"}),Object(b.jsx)("option",{value:"model",children:"Model"}),Object(b.jsx)("option",{value:"year",children:"Year"})]})})]})})]})}function be(e){var t=e.page,a=e.hasNext,n=e.hasPrevious;return Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"pagination",children:[Object(b.jsx)("li",{className:"page-item",children:Object(b.jsx)(j.a,{className:"page-link ".concat(!n&&"btn disabled"),to:"/?page=".concat(t-1),children:"Previous Page"})}),Object(b.jsx)("li",{className:"page-item",children:Object(b.jsx)(j.a,{className:"page-link  ".concat(!a&&"btn disabled"),to:"/?page=".concat(t+1),children:"Next Page"})})]})})}function de(e){var t=e.error;return t?Object(b.jsx)("div",{className:"alert alert-danger m-3 position-fixed bottom-0 end-0",role:"alert",children:t}):null}function he(){var e=Object(u.c)(z),t=Object(u.c)(q),a=Object(u.c)(W),r=Object(u.b)(),c=function(){var e=new URLSearchParams(Object(i.f)().search).get("page");return Number(e)||1}(),s=c>1,l=t.length>=10,j="succeeded"!==e,d=Object(n.useState)({type:"make",term:""}),h=Object(w.a)(d,2),p=h[0],m=h[1],O=p.type,v=p.term,x=Object(n.useCallback)(function(e,t){var a,n;return function(){var r=this,c=arguments;n?(clearTimeout(a),a=setTimeout((function(){Date.now()-n>=t&&(e.apply(r,c),n=Date.now())}),t-(Date.now()-n))):(e.apply(r,c),n=Date.now())}}((function(e){var t=e.term,a=e.type,n=e.page;r(M({term:t,type:a,page:n}))}),200),[r]);Object(n.useEffect)((function(){x({page:c,type:O,term:v})}),[c,O,v,x]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"text-center",children:Object(b.jsx)("h1",{children:"Vehicles List"})}),Object(b.jsxs)("div",{className:"py-5",children:[Object(b.jsx)(de,{error:a}),Object(b.jsx)(je,{setFilter:m,filter:p,handleFilterChange:function(e){var t=e.target;1!==c&&o.push("/");var a=t.name,n=t.value;m(Object(C.a)(Object(C.a)({},p),{},Object(S.a)({},a,n)))}}),Object(b.jsx)(oe,{vehicles:t,loading:j})]}),Object(b.jsx)(be,{hasNext:l,hasPrevious:s,page:c})]})}function pe(){var e=Object(u.c)(W),t=Object(u.b)();Object(n.useEffect)((function(){return function(){t(G())}}),[t]);var a={make:"",model:"",year:""},r=Object(n.useState)(a),c=Object(w.a)(r,2),s=c[0],i=c[1],l=function(e){var t=e.target,a=t.name,n=t.value;i(Object(C.a)(Object(C.a)({},s),{},Object(S.a)({},a,n)))},j=function(){var e=Object(k.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,t(E(s));case 4:return r=e.sent,e.next=7,Object(h.f)(r);case 7:i(a),o.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"row justify-content-center",children:[Object(b.jsx)("h1",{className:"text-center",children:"Add new vehicle"}),Object(b.jsxs)("form",{onSubmit:j,className:"py-5 col-md-4",children:[e&&Object(b.jsx)("div",{className:"alert alert-danger m-3 position-fixed bottom-0 end-0",role:"alert",children:e}),Object(b.jsx)(A,{name:"make",value:s.make,onChange:l}),Object(b.jsx)(A,{name:"model",value:s.model,onChange:l}),Object(b.jsx)(A,{type:"number",name:"year",value:s.year,onChange:l}),Object(b.jsx)("div",{className:"mb-3",children:Object(b.jsx)("button",{className:"btn btn-primary",onClick:j,children:"Add new"})})]})]})}function me(){return Object(b.jsx)(i.b,{history:o,children:Object(b.jsx)(g,{children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",component:he}),Object(b.jsx)(i.a,{exact:!0,path:"/new",component:pe}),Object(b.jsx)(i.a,{exact:!0,path:"/register",component:se}),Object(b.jsx)(i.a,{exact:!0,path:"/login",component:ce})]})})})}K.dispatch(m(localStorage.getItem("token"))),s.a.render(Object(b.jsx)(u.a,{store:K,children:Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(me,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.9d3e046c.chunk.js.map